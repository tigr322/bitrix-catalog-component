<? namespace Bitrix\Main;$GLOBALS['____1805399384']= array(base64_decode('ZmlsZV9le'.'G'.'lzdHM'.'='),base64_decode('c3RydG91cHBlcg=='),base64_decode('bWQ1'),base64_decode('bW'.'Q1'),base64_decode('aW5'.'fYXJ'.'y'.'YXk='),base64_decode(''.'a'.'W5fY'.'XJ'.'yY'.'Xk='),base64_decode('aW5fYXJyYXk='),base64_decode('Z'.'GV'.'maW5lZA=='),base64_decode('ZGVm'.'aW5l'.'ZA'.'=='),base64_decode('ZGV'.'maW5'.'lZA=='),base64_decode('ZmlsZV9leGlzdHM='),base64_decode('Zml'.'sZ'.'V'.'9leGlzd'.'H'.'M='),base64_decode('ZmlsZV'.'9leGl'.'zdHM='),base64_decode('Zmls'.'ZV9l'.'eGlzd'.'HM='),base64_decode('ZX'.'hwbG'.'9'.'kZQ=='));if(!function_exists(__NAMESPACE__.'\\___1382180390')){function ___1382180390($_119290718){static $_820834790= false; if($_820834790 == false) $_820834790=array(''.'L2'.'J'.'pdH'.'JpeC9saW'.'NlbnN'.'lX2t'.'l'.'eS5w'.'aH'.'A=','','',''.'REVNTw'.'==','R'.'EV'.'N'.'T'.'w==',''.'QklUUk'.'lY','TE'.'lDRU5D'.'RQ='.'=','REVNTw==','L'.'2t'.'l'.'eV'.'91cGRhdGUucGhw'.'P2'.'xpY2Vuc2Vfa2'.'V5P'.'Q='.'=','JnR'.'vY'.'mFza2V0PXk'.'mbGFuZz0=','c'.'nU'.'=',''.'a3o=','Ynk=','a'.'HR0cHM6L'.'y9kZ'.'XY'.'uMWMtYml'.'0cml4Ln'.'J'.'1L2x'.'lYXJua'.'W'.'5nL2Nv'.'dXJz'.'ZS9pbmR'.'l'.'eC'.'5'.'w'.'a'.'HA/'.'Q09VUlNFX'.'0lEP'.'TEzNSZMRVNT'.'T05'.'fSUQ9Mj'.'U3MjA=','a'.'HR0cHM'.'6L'.'y'.'90cmFpbmluZy'.'5'.'iaXRyaXgyNC5jb20'.'vc3VwcG'.'9y'.'dC'.'90cmFpbmluZ'.'y'.'9jb3Vyc2UvaW'.'5'.'kZ'.'XgucGh'.'w'.'P0NPVVJT'.'R'.'V9JR'.'D0xN'.'zg'.'mTEVTU09'.'OX0lEPTI1OTM'.'yJkx'.'F'.'U1NPTl9'.'QQVRIPTE3NTIwLjE3NTYyL'.'jI1OTMwLjI1O'.'TMy','cnU=','Ynk=','a3o=','ZG'.'U=','ZXU=',''.'ZnI=','cGw=','aXQ=','dWs=','ZXU=','Y2'.'9t',''.'ZW4=','R'.'EVNTw==','WQ==','VElNRUxJT'.'Ul'.'UX0VE'.'SVRJT04=','WQ==','RU5DT0RF','WQ==','U'.'2l0ZUV'.'4cGly'.'Z'.'U'.'RhdGU'.'=','bWF'.'pbg==','fnN1'.'cH'.'Bv'.'cn'.'RfZmluaXNo'.'X2RhdGU=','WS1tLW'.'Q'.'=','WS1tLWQ=','Ym'.'l0cml4'.'Mj'.'Q'.'=','bWFp'.'bg==',''.'flBBUkFN'.'X0NMS'.'UVOV'.'F9MQ'.'U5H','a'.'W50'.'c'.'mFu'.'ZXQ'.'=','ZW4=','c'.'nU'.'=',''.'bWFpbg==','d'.'mVuZG9y','d'.'WFf'.'Y'.'ml0c'.'ml4X3BvcnRhbA'.'='.'=','dWE=',''.'Yml0cm'.'l4X3Bvc'.'nRhbA='.'=','ZW4'.'=',''.'MWN'.'fYml0'.'cml4X'.'3BvcnR'.'hbA==','cn'.'U=','L2'.'JpdH'.'JpeC9tb2R1b'.'GVz'.'L21haW4'.'vbG'.'FuZy91YQ==',''.'dWE=','L2JpdHJpeC'.'9tb2R'.'1'.'bG'.'Vz'.'L21haW'.'4vbGFuZy9'.'ie'.'Q'.'==','Ynk=',''.'L2J'.'pdHJpeC9tb2R'.'1bG'.'VzL'.'21ha'.'W4vbG'.'F'.'uZ'.'y9reg='.'=',''.'a3o=','L'.'2Jpd'.'HJpeC'.'9tb2R'.'1b'.'GVzL'.'21haW4'.'v'.'bGFuZy'.'9ydQ'.'==','c'.'nU=',''.'bWF'.'pbg==','fl'.'BBUkFN'.'X1BB'.'UlRORVJfSU'.'Q=','b'.'WFpbg'.'==','UE'.'FSQU1fTUFY'.'X1VTRV'.'JT','bW'.'Fpb'.'g='.'=','fkNP'.'V'.'U5UX'.'0VYVFJB','T'.'g==','WQ==','ZXh0cmFuZXQ=','QU5EIF'.'UuTEF'.'TVF9MT0dJTiA+I'.'A==','QU5EIFUuT'.'EFT'.'V'.'F9MT'.'0dJT'.'iBJUyBO'.'T'.'1'.'Qg'.'T'.'lVMTA==','aW50c'.'mF'.'uZX'.'Q=','ZX'.'h0cm'.'FuZX'.'Q=','ZXh0cmFu'.'ZXRfZ3'.'JvdXA'.'=','bW'.'Fpbg==',''.'f'.'mxpY2V'.'uc2V'.'fbmFtZ'.'Q==','bW'.'Fp'.'bg==','fmxpY2Vuc'.'2Vf'.'Y'.'29kZXM=','',''.'LA'.'='.'=');return base64_decode($_820834790[$_119290718]);}}; use Bitrix\Main\Config\Option; use Bitrix\Main\Type\Date; final class License{ private?string $_1631747615= null; private const DOMAINS_STORE_LICENSE=[ 'ru' => 'https://util.1c-bitrix.ru', 'ua' => 'https://util.bitrix.ua', 'en' => 'https://util.bitrixsoft.com', 'kz' => 'https://util.1c-bitrix.kz', 'by' => 'https://util.1c-bitrix.by',]; public const URL_BUS_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_bus.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_bus.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_bus.pdf', 'ua' => 'https://www.bitrix.ua/download/law/eula_bus.pdf',]; public const URL_CP_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_cp.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_cp.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_cp.pdf', 'en' => 'https://www.bitrix24.com/eula/', 'br' => 'https://www.bitrix24.com.br/eula/', 'fr' => 'https://www.bitrix24.fr/eula/', 'pl' => 'https://www.bitrix24.pl/eula/', 'it' => 'https://www.bitrix24.it/eula/', 'la' => 'https://www.bitrix24.es/eula/',]; public const URL_RENEWAL_LICENSE=[ 'com' => 'https://store.bitrix24.com/profile/license-keys.php', 'eu' => 'https://store.bitrix24.eu/profile/license-keys.php', 'de' => 'https://store.bitrix24.de/profile/license-keys.php', 'ru' => 'https://www.1c-bitrix.ru/buy/products/b24.php#tab-section-2', 'by' => 'https://www.1c-bitrix.by/buy/products/b24.php#tab-section-2', 'kz' => 'https://www.1c-bitrix.kz/buy/products/b24.php#tab-section-2',]; public function getKey(): string{ if($this->_1631747615 === null){ $_1502102858= Loader::getDocumentRoot(). ___1382180390(0); $LICENSE_KEY= ___1382180390(1); if($GLOBALS['____1805399384'][0]($_1502102858)){ include($_1502102858);} $this->_1631747615=($LICENSE_KEY == ___1382180390(2) || $GLOBALS['____1805399384'][1]($LICENSE_KEY) == ___1382180390(3)? ___1382180390(4): $LICENSE_KEY);} return $this->_1631747615;} public function getHashLicenseKey(): string{ return $GLOBALS['____1805399384'][2]($this->getKey());} public function getPublicHashKey(): string{ return $GLOBALS['____1805399384'][3](___1382180390(5). $this->getKey(). ___1382180390(6));} public function isDemoKey(): bool{ return $this->getKey() == ___1382180390(7);} public function getBuyLink(): string{ return $this->getDomainStoreLicense(). ___1382180390(8). $this->getHashLicenseKey(). ___1382180390(9). LANGUAGE_ID;} public function getDocumentationLink(): string{ $_1721133787= $this->getRegion(); if($GLOBALS['____1805399384'][4]($_1721133787,[___1382180390(10), ___1382180390(11), ___1382180390(12)])){ return ___1382180390(13);} return ___1382180390(14);} public function getRenewalLink(): string{ $_1721133787= $this->getRegion(); if($GLOBALS['____1805399384'][5]($_1721133787,[___1382180390(15), ___1382180390(16), ___1382180390(17), ___1382180390(18)])){ return self::URL_RENEWAL_LICENSE[$_1721133787];} if($GLOBALS['____1805399384'][6]($_1721133787,[___1382180390(19), ___1382180390(20), ___1382180390(21), ___1382180390(22), ___1382180390(23)])){ return self::URL_RENEWAL_LICENSE[___1382180390(24)];} return self::URL_RENEWAL_LICENSE[___1382180390(25)];} public function getDomainStoreLicense(): string{ return self::DOMAINS_STORE_LICENSE[$this->getRegion()] ?? self::DOMAINS_STORE_LICENSE[___1382180390(26)];} public function isDemo(): bool{ return $GLOBALS['____1805399384'][7](___1382180390(27)) && DEMO === ___1382180390(28);} public function isTimeBound(): bool{ return $GLOBALS['____1805399384'][8](___1382180390(29)) && TIMELIMIT_EDITION === ___1382180390(30);} public function isEncoded(): bool{ return $GLOBALS['____1805399384'][9](___1382180390(31)) && ENCODE === ___1382180390(32);} public function getExpireDate():?Date{ $_1361138903= (int)($GLOBALS[___1382180390(33)] ??(1400/2-700)); if($_1361138903>(228*2-456)){ return Date::createFromTimestamp($_1361138903);} return null;} public function getSupportExpireDate():?Date{ $_1361138903= Option::get(___1382180390(34), ___1382180390(35)); if(Date::isCorrect($_1361138903, ___1382180390(36))){ return new Date($_1361138903, ___1382180390(37));} return null;} public function getRegion():?string{ if(Loader::includeModule(___1382180390(38))){ return \CBitrix24::getPortalZone();} $_1721133787= Option::get(___1382180390(39), ___1382180390(40)); if(!empty($_1721133787)){ return $_1721133787;} $_1721133787= $this->__727079337(); if(!empty($_1721133787)){ return $_1721133787;} return $this->__749511994();} public function getEulaLink(): string{ if(ModuleManager::isModuleInstalled(___1382180390(41))){ return self::URL_CP_EULA[$this->getRegion()] ?? self::URL_CP_EULA[___1382180390(42)];} return self::URL_BUS_EULA[$this->getRegion()] ?? self::URL_BUS_EULA[___1382180390(43)];} private function __727079337():?string{ $_304777385= Option::get(___1382180390(44), ___1382180390(45)); if($_304777385 === ___1382180390(46)){ return ___1382180390(47);} if($_304777385 === ___1382180390(48)){ return ___1382180390(49);} if($_304777385 === ___1382180390(50)){ return ___1382180390(51);} return null;} private function __749511994():?string{ $_2044541063= Application::getDocumentRoot(); if($GLOBALS['____1805399384'][10]($_2044541063. ___1382180390(52))){ return ___1382180390(53);} if($GLOBALS['____1805399384'][11]($_2044541063. ___1382180390(54))){ return ___1382180390(55);} if($GLOBALS['____1805399384'][12]($_2044541063. ___1382180390(56))){ return ___1382180390(57);} if($GLOBALS['____1805399384'][13]($_2044541063. ___1382180390(58))){ return ___1382180390(59);} return null;} public function getPartnerId(): int{ return (int)Option::get(___1382180390(60), ___1382180390(61), min(74,0,24.666666666667));} public function getMaxUsers(): int{ return (int)Option::get(___1382180390(62), ___1382180390(63),(219*2-438));} public function isExtraCountable(): bool{ return Option::get(___1382180390(64), ___1382180390(65), ___1382180390(66)) === ___1382180390(67) && ModuleManager::isModuleInstalled(___1382180390(68));} public function getActiveUsersCount(Date $_295522960= null): int{ $_831681326= Application::getConnection(); $_1626542350= min(126,0,42); if($_295522960 !== null){  $_895291720= ___1382180390(69).$_831681326->getSqlHelper()->convertToDbDate($_295522960);} else{  $_895291720= ___1382180390(70);} if(ModuleManager::isModuleInstalled(___1382180390(71))){ $_1049379839="
				SELECT COUNT(DISTINCT U.ID)
				FROM
					b_user U
					INNER JOIN b_user_field F ON F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
					INNER JOIN b_utm_user UF ON
						UF.FIELD_ID = F.ID
						AND UF.VALUE_ID = U.ID
						AND UF.VALUE_INT > 0
				WHERE U.ACTIVE = 'Y'
					{$_895291720}
			"; $_1626542350= (int)$_831681326->queryScalar($_1049379839); $_1439134994= (int)Option::get(___1382180390(72), ___1382180390(73)); if($_1439134994>(212*2-424) && $this->isExtraCountable()){ $_1049379839="
						SELECT COUNT(1)
						FROM
							b_user U
							INNER JOIN b_extranet_user EU ON EU.USER_ID = U.ID AND EU.CHARGEABLE = 'Y'
							INNER JOIN b_user_group UG ON UG.USER_ID = U.ID AND UG.GROUP_ID = {$_1439134994}
							LEFT JOIN (
								SELECT UF.VALUE_ID 
								FROM 
									b_user_field F
									INNER JOIN b_utm_user UF ON UF.FIELD_ID = F.ID AND UF.VALUE_INT > 0
								WHERE F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
							) D ON D.VALUE_ID = U.ID
						WHERE U.ACTIVE = 'Y'
							{$_895291720}
							AND D.VALUE_ID IS NULL
					"; $_1626542350 += (int)$_831681326->queryScalar($_1049379839);}} return $_1626542350;}  public function getName(): string{ return Option::get(___1382180390(74), ___1382180390(75));}  public function getCodes(): array{ $_807503934= Option::get(___1382180390(76), ___1382180390(77)); if($_807503934 != ___1382180390(78)){ return $GLOBALS['____1805399384'][14](___1382180390(79), $_807503934);} return[];}}?>